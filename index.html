<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>사자성어 단어 찾기 게임</title>
    <style>
        .word-search-container {
            max-width: 600px;
            margin: 20px auto;
            padding: 20px;
            background-color: #f5f5f5;
            border-radius: 10px;
            font-family: 'Noto Sans KR', sans-serif;
        }
        
        .game-title {
            text-align: center;
            color: #333;
            margin-bottom: 20px;
        }
        
        .word-info {
            background-color: #e8f4f8;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .word-info h3 {
            color: #2c5aa0;
            margin-top: 0;
        }
        
        .grid-container {
            display: inline-block;
            background-color: white;
            padding: 10px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .word-grid {
            display: grid;
            grid-template-columns: repeat(10, 40px);
            gap: 2px;
            margin: 20px auto;
            width: fit-content;
        }
        
        .cell {
            width: 40px;
            height: 40px;
            border: 1px solid #ddd;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            background-color: #fff;
            transition: all 0.3s ease;
        }
        
        .cell:hover {
            background-color: #f0f0f0;
        }
        
        .cell.selected {
            background-color: #ffeb3b;
        }
        
        .cell.found {
            background-color: #4caf50;
            color: white;
        }
        
        .controls {
            text-align: center;
            margin-top: 20px;
        }
        
        .btn {
            padding: 10px 20px;
            margin: 5px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
        }
        
        .btn-check {
            background-color: #2196f3;
            color: white;
        }
        
        .btn-check:hover {
            background-color: #1976d2;
        }
        
        .btn-reset {
            background-color: #f44336;
            color: white;
        }
        
        .btn-reset:hover {
            background-color: #d32f2f;
        }
        
        .message {
            text-align: center;
            margin-top: 15px;
            font-size: 18px;
            font-weight: bold;
            min-height: 25px;
        }
        
        .success {
            color: #4caf50;
        }
        
        .error {
            color: #f44336;
        }
        
        .hint {
            background-color: #fff3cd;
            padding: 10px;
            border-radius: 5px;
            margin-top: 15px;
            border: 1px solid #ffeaa7;
        }
    </style>
</head>
<body>
    <div class="word-search-container">
        <h2 class="game-title">🔍 사자성어 단어 찾기 게임</h2>
        
        <div class="word-info">
            <h3>오늘의 사자성어: 청출어람 (靑出於藍)</h3>
            <p><strong>뜻:</strong> 쪽에서 나온 푸른 물감이 쪽보다 더 푸르다는 뜻으로, 제자가 스승보다 더 뛰어남을 비유하는 말입니다.</p>
            <p><strong>유래:</strong> 순자(荀子)의 권학편에서 나온 말로, "청취지어람 이청어람(靑取之於藍 而靑於藍)"에서 유래했습니다.</p>
        </div>
        
        <div class="grid-container">
            <div class="word-grid" id="wordGrid"></div>
        </div>
        
        <div class="controls">
            <button class="btn btn-check" onclick="checkSelection()">정답 확인</button>
            <button class="btn btn-reset" onclick="resetGame()">다시 시작</button>
        </div>
        
        <div class="message" id="message"></div>
        
        <div class="hint">
            <strong>힌트:</strong> 가로, 세로, 대각선 방향으로 연속된 4글자를 찾아보세요!
        </div>
    </div>

    <script>
        const gridSize = 10;
        const targetWord = ['청', '출', '어', '람'];
        let grid = [];
        let selectedCells = [];
        let foundWords = [];

        // 랜덤 한글 생성
        function getRandomKorean() {
            const koreanChars = ['가', '나', '다', '라', '마', '바', '사', '아', '자', '차', '카', '타', '파', '하', '강', '남', '북', '동', '서', '산', '물', '불', '빛', '달', '별', '해', '구', '름', '비', '눈', '꽃', '나', '무', '새', '물', '고', '기', '사', '람', '집', '책', '문', '창', '길', '돌'];
            return koreanChars[Math.floor(Math.random() * koreanChars.length)];
        }

        // 그리드 초기화
        function initializeGrid() {
            grid = Array(gridSize).fill(null).map(() => Array(gridSize).fill(''));
            
            // 랜덤하게 채우기
            for (let i = 0; i < gridSize; i++) {
                for (let j = 0; j < gridSize; j++) {
                    grid[i][j] = getRandomKorean();
                }
            }
            
            // 청출어람 숨기기 (여러 위치에)
            placeWord();
            placeWord(); // 두 번 배치
            
            renderGrid();
        }

        // 단어 배치
        function placeWord() {
            const directions = [
                [0, 1],   // 가로
                [1, 0],   // 세로
                [1, 1],   // 대각선 (우하)
                [1, -1]   // 대각선 (좌하)
            ];
            
            let placed = false;
            let attempts = 0;
            
            while (!placed && attempts < 100) {
                const direction = directions[Math.floor(Math.random() * directions.length)];
                const startRow = Math.floor(Math.random() * gridSize);
                const startCol = Math.floor(Math.random() * gridSize);
                
                let valid = true;
                for (let i = 0; i < targetWord.length; i++) {
                    const newRow = startRow + direction[0] * i;
                    const newCol = startCol + direction[1] * i;
                    
                    if (newRow < 0 || newRow >= gridSize || newCol < 0 || newCol >= gridSize) {
                        valid = false;
                        break;
                    }
                }
                
                if (valid) {
                    for (let i = 0; i < targetWord.length; i++) {
                        const newRow = startRow + direction[0] * i;
                        const newCol = startCol + direction[1] * i;
                        grid[newRow][newCol] = targetWord[i];
                    }
                    placed = true;
                }
                
                attempts++;
            }
        }

        // 그리드 렌더링
        function renderGrid() {
            const gridElement = document.getElementById('wordGrid');
            gridElement.innerHTML = '';
            
            for (let i = 0; i < gridSize; i++) {
                for (let j = 0; j < gridSize; j++) {
                    const cell = document.createElement('div');
                    cell.className = 'cell';
                    cell.textContent = grid[i][j];
                    cell.dataset.row = i;
                    cell.dataset.col = j;
                    cell.onclick = () => toggleCell(i, j);
                    gridElement.appendChild(cell);
                }
            }
        }

        // 셀 선택/해제
        function toggleCell(row, col) {
            const cellKey = `${row}-${col}`;
            const cellElement = document.querySelector(`[data-row="${row}"][data-col="${col}"]`);
            
            if (foundWords.includes(cellKey)) return;
            
            const index = selectedCells.findIndex(cell => cell.key === cellKey);
            
            if (index > -1) {
                selectedCells.splice(index, 1);
                cellElement.classList.remove('selected');
            } else {
                if (selectedCells.length < 4) {
                    selectedCells.push({ row, col, key: cellKey });
                    cellElement.classList.add('selected');
                }
            }
        }

        // 선택 확인
        function checkSelection() {
            if (selectedCells.length !== 4) {
                showMessage('4글자를 선택해주세요!', 'error');
                return;
            }
            
            // 선택된 글자 확인
            const selectedChars = selectedCells.map(cell => grid[cell.row][cell.col]).join('');
            
            if (selectedChars === '청출어람') {
                selectedCells.forEach(cell => {
                    const cellElement = document.querySelector(`[data-row="${cell.row}"][data-col="${cell.col}"]`);
                    cellElement.classList.add('found');
                    cellElement.classList.remove('selected');
                    foundWords.push(cell.key);
                });
                showMessage('정답입니다! 청출어람을 찾았습니다! 🎉', 'success');
                selectedCells = [];
            } else {
                showMessage('다시 시도해보세요!', 'error');
                // 잘못된 선택 초기화
                selectedCells.forEach(cell => {
                    const cellElement = document.querySelector(`[data-row="${cell.row}"][data-col="${cell.col}"]`);
                    cellElement.classList.remove('selected');
                });
                selectedCells = [];
            }
        }

        // 메시지 표시
        function showMessage(text, type) {
            const messageElement = document.getElementById('message');
            messageElement.textContent = text;
            messageElement.className = `message ${type}`;
            
            setTimeout(() => {
                messageElement.textContent = '';
                messageElement.className = 'message';
            }, 3000);
        }

        // 게임 리셋
        function resetGame() {
            selectedCells = [];
            foundWords = [];
            initializeGrid();
            document.getElementById('message').textContent = '';
        }

        // 게임 시작
        initializeGrid();
    </script>
</body>
</html>
